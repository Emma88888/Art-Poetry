{"ast":null,"code":"import _toConsumableArray from\"/Users/emma/SEI/projects/Art-Poetry/art-poetry/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/emma/SEI/projects/Art-Poetry/art-poetry/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import\"./NewArtwork.css\";import{useState}from'react';import Artwork from\"../Artwork/Artwork\";import PoemInput from'../PoemInput/PoemInput';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function NewArtwork(_ref){var onSave=_ref.onSave;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),artworks=_useState2[0],setArtworks=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),artworkIndex=_useState4[0],setArtworkIndex=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),buttonClicks=_useState6[0],setButtonClicks=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),text=_useState8[0],changeText=_useState8[1];function getNewArtwork(){fetch(\"https://openaccess-api.clevelandart.org/api/artworks?limit=20&skip=\"+buttonClicks*20).then(function(response){return response.json();}).then(function(json){var newArtworks=[].concat(_toConsumableArray(artworks),_toConsumableArray(json.data.filter(function(artwork){var _artwork$images,_artwork$images$web;return(_artwork$images=artwork.images)===null||_artwork$images===void 0?void 0:(_artwork$images$web=_artwork$images.web)===null||_artwork$images$web===void 0?void 0:_artwork$images$web.url;}).map(function(artwork){return{image:artwork.images.web.url,artists:artwork.creators.map(function(creator){return creator.description;}).join(\", \"),description:artwork.wall_description};})));setArtworks(newArtworks);setArtworkIndex(Math.floor(Math.random()*newArtworks.length));setButtonClicks(buttonClicks+1);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[buttonClicks>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Artwork,{artwork:artworks[artworkIndex]}),/*#__PURE__*/_jsx(PoemInput,{text:text,onChange:changeText}),/*#__PURE__*/_jsx(\"button\",{className:\"save-button\",onClick:function onClick(){return onSave(artworks[artworkIndex],text);},children:\"Save\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"new-art-button\",onClick:getNewArtwork,children:\"New art and poem\"})]});}","map":{"version":3,"names":["React","useState","Artwork","PoemInput","NewArtwork","onSave","artworks","setArtworks","artworkIndex","setArtworkIndex","buttonClicks","setButtonClicks","text","changeText","getNewArtwork","fetch","then","response","json","newArtworks","data","filter","artwork","images","web","url","map","image","artists","creators","creator","description","join","wall_description","Math","floor","random","length"],"sources":["/Users/emma/SEI/projects/Art-Poetry/art-poetry/src/NewArtwork/NewArtwork.js"],"sourcesContent":["import React from \"react\"\nimport \"./NewArtwork.css\"\nimport { useState } from 'react';\nimport Artwork from \"../Artwork/Artwork\";\nimport PoemInput from '../PoemInput/PoemInput';\n\nexport default function NewArtwork({onSave}) {\n  const [artworks, setArtworks] = useState([])\n  const [artworkIndex, setArtworkIndex] = useState()\n  const [buttonClicks, setButtonClicks] = useState(0)\n  const [text, changeText] = useState(\"\")\n\n\n  function getNewArtwork() {\n    fetch(\"https://openaccess-api.clevelandart.org/api/artworks?limit=20&skip=\" + buttonClicks * 20)\n      .then((response) => {\n        return response.json()\n      }) \n      .then((json) => {\n        const newArtworks = [\n          ...artworks,\n          ...json.data\n          .filter((artwork) => {\n            return artwork.images?.web?.url\n          })\n          .map((artwork) => {\n            return {\n              image: artwork.images.web.url,\n              artists: artwork.creators.map((creator) => {\n                return (\n                  creator.description\n                )\n              }) .join(\", \"),\n              description: artwork.wall_description\n            }\n          })\n        ]\n\n        setArtworks(newArtworks)\n        setArtworkIndex(Math.floor(Math.random() * newArtworks.length))\n        setButtonClicks(buttonClicks + 1)\n      })\n  }\n\n  return (\n    <div className=\"App\">\n      {buttonClicks > 0 && <>\n        <Artwork artwork={artworks[artworkIndex]}/>\n        <PoemInput text={text} onChange={changeText}/>\n        <button className=\"save-button\" onClick={() => onSave(artworks[artworkIndex], text)}>Save</button>\n      </>}\n     <button className=\"new-art-button\" onClick={getNewArtwork}>New art and poem</button>\n    </div>\n  );\n}"],"mappings":"gRAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAO,kBAAP,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,MAAOC,QAAP,KAAoB,oBAApB,CACA,MAAOC,UAAP,KAAsB,wBAAtB,C,6IAEA,cAAe,SAASC,WAAT,MAA8B,IAATC,OAAS,MAATA,MAAS,CAC3C,cAAgCJ,QAAQ,CAAC,EAAD,CAAxC,wCAAOK,QAAP,eAAiBC,WAAjB,eACA,eAAwCN,QAAQ,EAAhD,yCAAOO,YAAP,eAAqBC,eAArB,eACA,eAAwCR,QAAQ,CAAC,CAAD,CAAhD,yCAAOS,YAAP,eAAqBC,eAArB,eACA,eAA2BV,QAAQ,CAAC,EAAD,CAAnC,yCAAOW,IAAP,eAAaC,UAAb,eAGA,QAASC,cAAT,EAAyB,CACvBC,KAAK,CAAC,sEAAwEL,YAAY,CAAG,EAAxF,CAAL,CACGM,IADH,CACQ,SAACC,QAAD,CAAc,CAClB,MAAOA,SAAQ,CAACC,IAAT,EAAP,CACD,CAHH,EAIGF,IAJH,CAIQ,SAACE,IAAD,CAAU,CACd,GAAMC,YAAW,8BACZb,QADY,qBAEZY,IAAI,CAACE,IAAL,CACFC,MADE,CACK,SAACC,OAAD,CAAa,yCACnB,uBAAOA,OAAO,CAACC,MAAf,+DAAO,gBAAgBC,GAAvB,8CAAO,oBAAqBC,GAA5B,CACD,CAHE,EAIFC,GAJE,CAIE,SAACJ,OAAD,CAAa,CAChB,MAAO,CACLK,KAAK,CAAEL,OAAO,CAACC,MAAR,CAAeC,GAAf,CAAmBC,GADrB,CAELG,OAAO,CAAEN,OAAO,CAACO,QAAR,CAAiBH,GAAjB,CAAqB,SAACI,OAAD,CAAa,CACzC,MACEA,QAAO,CAACC,WADV,CAGD,CAJQ,EAILC,IAJK,CAIA,IAJA,CAFJ,CAOLD,WAAW,CAAET,OAAO,CAACW,gBAPhB,CAAP,CASD,CAdE,CAFY,EAAjB,CAmBA1B,WAAW,CAACY,WAAD,CAAX,CACAV,eAAe,CAACyB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAgBjB,WAAW,CAACkB,MAAvC,CAAD,CAAf,CACA1B,eAAe,CAACD,YAAY,CAAG,CAAhB,CAAf,CACD,CA3BH,EA4BD,CAED,mBACE,aAAK,SAAS,CAAC,KAAf,WACGA,YAAY,CAAG,CAAf,eAAoB,wCACnB,KAAC,OAAD,EAAS,OAAO,CAAEJ,QAAQ,CAACE,YAAD,CAA1B,EADmB,cAEnB,KAAC,SAAD,EAAW,IAAI,CAAEI,IAAjB,CAAuB,QAAQ,CAAEC,UAAjC,EAFmB,cAGnB,eAAQ,SAAS,CAAC,aAAlB,CAAgC,OAAO,CAAE,yBAAMR,OAAM,CAACC,QAAQ,CAACE,YAAD,CAAT,CAAyBI,IAAzB,CAAZ,EAAzC,kBAHmB,GADvB,cAMC,eAAQ,SAAS,CAAC,gBAAlB,CAAmC,OAAO,CAAEE,aAA5C,8BAND,GADF,CAUD"},"metadata":{},"sourceType":"module"}